<%- include('../partials/user/header') %>



<style>
	.single-product {
    overflow: hidden;
    transition: transform 0.3s ease-in-out;
}

.single-product:hover img {
    transform: scale(1.1);
}

.single-product img {
    transition: transform 0.3s ease-in-out;
    width: 100%;
}

.single-product .product-details h6,
.single-product .social-info p {
    transition: color 0.3s ease-in-out;
}

.single-product:hover .product-details h6,
.single-product:hover .social-info p {
    color: #ffbb00;
}
</style>

   

    <!-- start banner Area -->
	<section class="banner-area">
		<div class="container">
			<div class="row fullscreen align-items-center justify-content-start">
				<div class="col-lg-12">
					<div class="active-banner-slider owl-carousel">
						<!-- single-slide -->
						<div class="row single-slide align-items-center d-flex">
							<div class="col-lg-5 col-md-6">
								<div class="banner-content">
									<h1>UNLEASH <br>THE POWER</h1>
									<p>Your One-Stop Shop for Laptops and Accessories Top Brands | Gaming Rigs | Office Essentials | Custom Builds.</p>
									<div class="add-bag d-flex align-items-center">
										<a class="add-btn" href="#product_section_main"><span class="lnr lnr-cross"></span></a>
										<span class="add-text text-uppercase">Let's Rock</span>
									</div>
								</div>
							</div>
							<div class="col-lg-7">
								<div class="banner-img">
									<img class="img-fluid" src="img/banner/banner-img.webp" alt="">
								</div>
							</div>
						</div>
						<!-- single-slide -->
						<div class="row single-slide align-items-center d-flex">
							<div class="col-lg-5 col-md-6">
								<div class="banner-content">
									<h1>UNLOCK <br>YOUR DESIRE</h1>
									<p>Your One-Stop Shop for Laptops and Accessories Top Brands | Gaming Rigs | Office Essentials | Custom Builds.</p>
									<div class="add-bag d-flex align-items-center">
										<a class="add-btn" href="#product_section_main"><span class="lnr lnr-cross"></span></a>
										<span class="add-text text-uppercase">Let's Roll</span>
									</div>
								</div>
							</div>
							<div class="col-lg-7">
								<div class="banner-img">
									<img class="img-fluid" src="img/banner/banner-img.webp" alt="">
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<!-- End banner Area -->

	

	<!-- start features Area -->
	<section class="features-area section_gap">
		<div class="container">
			<div class="row features-inner">
				<!-- single features -->
				<div class="col-lg-3 col-md-6 col-sm-3 col-3">
					<div class="single-features">
						<div class="f-icon">
							<img src="img/features/f-icon1.png" alt="">
						</div>
						<h6>Free Delivery</h6>
						<p>Free Shipping on all order</p>
					</div>
				</div>
				<!-- single features -->
				<div class="col-lg-3 col-md-6 col-sm-3 col-3">
					<div class="single-features">
						<div class="f-icon">
							<img src="img/features/f-icon2.png" alt="">
						</div>
						<h6>Return Policy</h6>
						<p>Free Shipping on all order</p>
					</div>
				</div>
				<!-- single features -->
				<div class="col-lg-3 col-md-6 col-sm-3 col-3">
					<div class="single-features">
						<div class="f-icon">
							<img src="img/features/f-icon3.png" alt="">
						</div>
						<h6>24/7 Support</h6>
						<p>Free Shipping on all order</p>
					</div>
				</div>
				<!-- single features -->
				<div class="col-lg-3 col-md-6 col-sm-3 col-3">
					<div class="single-features">
						<div class="f-icon">
							<img src="img/features/f-icon4.png" alt="">
						</div>
						<h6>Secure Payment</h6>
						<p>Free Shipping on all order</p>
					</div>
				</div>
			</div>
		</div>
	</section>
	<!-- end features Area -->

	<style>
		/* Desktop layout */
		@media (max-width: 767px) {
    .features-area {
        display: none;
    }
}

		</style>

	<!-- start product Area -->
	<section class="owl-carousel active-product-area section_gap" id="product_section_main">
		<!-- single product slide -->
		<div class="single-product-slider">
			<div class="container">
				<div class="row justify-content-center">
					<div class="col-lg-6 text-center">
						<div class="section-title">
							<h1>Latest Products</h1>
							<p>Discover the latest in high-performance laptops, designed to deliver power and efficiency for all your computing needs.</p>
						</div>
					</div>
				</div>
				<div class="row">
					<!-- single product -->

					<%for(let i=0;i< products.length; i++){%>

					<div class="col-lg-3 col-md-6 col-sm-6 col-6">
						<div class="single-product">
							<a href="/productDetails?id=<%=products[i]._id%>">
							<img class="img-fluid" src="<%= products[i].productImage[0] %>" alt="">
							<div class="product-details">
								<h6><%=products[i].productName%></h6>
								<div class="price">
									<h6>₹ <%=products[i].salePrice%></h6>
									<h6 class="l-through">₹ <%=products[i].regularPrice%></h6>
								</div>
							  </a>
								<div class="prd-bottom">

									<a href="#" onclick="addToCart('<%=products[i]._id%>')" class="social-info">
										<span class="ti-bag"></span>
										<p class="hover-text">add to cart</p>
									</a>
									<a href="#" onclick="addToWishlist('<%=products[i]._id%>')" class="social-info">
										<span class="lnr lnr-heart"></span>
										<p class="hover-text">Wishlist</p>
									</a>
									<a href="/productDetails?id=<%=products[i]._id%>" class="social-info">
										<span class="lnr lnr-move"></span>
										<p class="hover-text">view more</p>
									</a>
								</div>
							</div>
						</div>
					</div>
					<%}%>
					
				</div>
			</div>
		</div>
		<!-- single product slide -->
		<div class="single-product-slider">
			<div class="container">
				<div class="row justify-content-center">
					<div class="col-lg-6 text-center">
						<div class="section-title">
							<h1>Most Selling Products</h1>
							<p>Explore our top-selling laptops and accessories, handpicked for their exceptional performance and customer satisfaction.</p>
						</div>
					</div>
				</div>
				<div class="row">
					<!-- single product -->

					<%for(let i=0;i< products.length; i++){%>

						<div class="col-lg-3 col-md-6 col-sm-6 col-6">
							<div class="single-product">
								<a href="/productDetails?id=<%=products._id%>">
								<img class="img-fluid" src="<%= products[i].productImage[0] %>" alt="">
								<div class="product-details">
									<h6><%=products[i].productName%></h6>
									<div class="price">
										<h6>₹ <%=products[i].salePrice%>.00</h6>
										<h6 class="l-through">₹ <%=products[i].regularPrice%>.00</h6>
									</div>
								  </a>
									<div class="prd-bottom">
	
										<a href="#" onclick="addToCart('<%=products[i]._id%>')" class="social-info">
											<span class="ti-bag"></span>
											<p class="hover-text">add to cart</p>
										</a>
										<a href="#" onclick="addToWishlist('<%=products[i]._id%>')" class="social-info">
											<span class="lnr lnr-heart"></span>
											<p class="hover-text">Wishlist</p>
										</a>
										<a href="/productDetails?id=<%=products[i]._id%>" class="social-info">
											<span class="lnr lnr-move"></span>
											<p class="hover-text">view more</p>
										</a>
									</div>
								</div>
							</div>
						</div>
						<%}%>
					
				</div>
			</div>
		</div>
	</section>
	<!-- end product Area -->

	

	<!-- Start brand Area -->
	<section class="brand-area section_gap">
		<div class="container">
			<div class="row">
				<a class="col single-img" href="#">
					<img class="img-fluid d-block mx-auto" src="img/brand/1.png" alt="">
				</a>
				<a class="col single-img" href="#">
					<img class="img-fluid d-block mx-auto" src="img/brand/2.png" alt="">
				</a>
				<a class="col single-img" href="#">
					<img class="img-fluid d-block mx-auto" src="img/brand/3.png" alt="">
				</a>
				<a class="col single-img" href="#">
					<img class="img-fluid d-block mx-auto" src="img/brand/4.png" alt="">
				</a>
			</div>
		</div>
	</section>
	<!-- End brand Area -->




	<script>
		document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute("href"));
            if (target) {
                target.scrollIntoView({ behavior: "smooth" });
            }
        });
    });
});


function handleAuthError(title, message) {
  return Swal.fire({
    title: title,
    text: message,
    icon: "warning",
    showCancelButton: true,
    confirmButtonText: "Login",
    cancelButtonText: "Cancel",
    reverseButtons: true
  }).then((result) => {
    if (result.isConfirmed) {
      window.location.href = "/login";
    }
  });
}

// Add to wishlist function
function addToWishlist(productId) {
  $.ajax({
    url: '/addToWishlist',
    method: "POST",
    data: { productId: productId },
    success: (response) => {
      if (response.status) {
        Swal.fire({
          title: "Added to Wishlist",
          text: "The product has been added to your wishlist.",
          icon: "success",
          timer: 2000,
          showConfirmButton: false
        });
      } else {
        Swal.fire({
          title: "Already in Wishlist",
          text: response.message,
          icon: "info",
          timer: 2000,
          showConfirmButton: false
        });
      }
    },
    error: (xhr) => {
      if (xhr.status === 401) {
        handleAuthError(
          "Not Logged In",
          "You need to log in to add items to your wishlist."
        );
      } else {
        Swal.fire({
          title: "Error",
          text: "There was an error adding the product to your wishlist.",
          icon: "error",
          timer: 2000,
          showConfirmButton: false
        });
      }
    }
  });
}

// Add to cart function
function addToCart(productId) {
  $.ajax({
    url: '/addToCart',
    method: "POST",
    data: { productId: productId },
    success: (response) => {
      if (response.status) {
        Swal.fire({
			title: "Added to Cart",
			text: response.message,
			icon: "success",
			showCancelButton: true,  // Enables the second button
			confirmButtonText: "Cart", // Redirects to cart
			cancelButtonText: "OK",  // Closes the alert
			timer: 2000
		}).then((result) => {
			if (result.isConfirmed) {
				window.location.href = "/cart"; // Redirects to the cart page
			} else {
				location.reload(); // Reload to update cart UI
			}
		});

      } else {
        Swal.fire({
          title: "Error",
          text: response.message || "Unable to add to cart",
          icon: "error",
          timer: 2000,
          showConfirmButton: false
        });
      }
    },
    error: (xhr) => {
      if (xhr.status === 401) {
        handleAuthError(
          "Not Logged In",
          "You need to log in to add items to your cart."
        );
      } else {
        Swal.fire({
          title: "Error",
          text: "Stock limit reached or maximum 5 items per user",
          icon: "error",
          timer: 2000,
          showConfirmButton: false
        });
      }
    }
  });
}






	</script>

  
<%- include('../partials/user/footer') %>